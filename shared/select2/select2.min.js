/*! select2.placeholder.js - minimal shim for offline/air-gapped installs.
 *  Replace this file with the official Select2 v4.1.x minified JS for full functionality.
 *
 *  This placeholder provides:
 *   - a non-destructive $.fn.select2 shim that creates a basic searchable wrapper
 *   - emits 'bz.select2.loaded' event so the plugin initialization proceeds
 *
 *  IMPORTANT: For full Select2 feature set (templates, keyboard support, a11y), download
 *  the official Select2 files from the links provided below and replace this file.
 */
(function(){
    if (typeof jQuery === 'undefined') {
        console && console.warn && console.warn('Select2 placeholder: jQuery missing.');
        return;
    }
    (function($){
        if (typeof $.fn.select2 === 'function') {
            // real Select2 already present
            jQuery(document).trigger('bz.select2.loaded');
            return;
        }

        $.fn.select2 = function(opts){
            return this.each(function(){
                var \$sel = $(this);
                if (\$sel.data('select2-placeholder-inited')) return;
                \$sel.data('select2-placeholder-inited', true);

                // hide native select but keep it in DOM
                \$sel.css({display:'block'});

                var placeholder = (opts && opts.placeholder) ? opts.placeholder : \$sel.attr('data-placeholder') || '';
                var container = $('<div class="select2-placeholder-wrap"></div>');
                var input = $('<input type="text" class="select2-placeholder-search" placeholder="'+placeholder+'" />').css({width:'100%',boxSizing:'border-box',marginBottom:'6px'});
                \$sel.before(container);
                container.append(input).append(\$sel);

                input.on('keyup', function(){
                    var term = $(this).val().toLowerCase();
                    \$sel.find('option').each(function(){
                        var txt = $(this).text().toLowerCase();
                        if (!term || txt.indexOf(term) !== -1) $(this).show(); else $(this).hide();
                    });
                });
            });
        };

        // mark loaded so loader triggers
        jQuery(document).trigger('bz.select2.loaded');
        console && console.warn && console.warn('Select2 placeholder loaded. Replace select2.min.js with the official Select2 for full functionality.');
    })(jQuery);
})();